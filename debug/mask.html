<!DOCTYPE html>
<html>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title> Mask is MultiPolygon</title>
<style type="text/css">
    html,
    body {
        margin: 0px;
        height: 100%;
        width: 100%
    }

    .container {
        width: 100%;
        height: 100%;
        background: black;
    }
</style>
<link rel="stylesheet" href="../dist/maptalks.css">
<script type="text/javascript" src="../dist/maptalks.js"></script>

<body>

    <div id="map" class="container"></div>

    <script>
        var map = new maptalks.Map('map', {
            center: [121.88296043546791, 29.866852080194775],
            zoom: 10
        });

        map.on('click', e => {
            console.log(e.coordinate.toArray());
        })

        let baseLayer = new maptalks.TileLayer('base', {
            urlTemplate: 'http://www.google.cn/maps/vt?lyrs=s@189&gl=cn&x={x}&y={y}&z={z}',
            subdomains: ['a', 'b', 'c'],
            attribution: '&copy; <a href="http://www.google.cn/maps" target="_blank">Google Maps</a> contributors'
        });
        map.setBaseLayer(baseLayer);

        // let lnglats = [
        //     [
        //         [
        //             [-0.13497874090580808, 51.51747919390161],
        //             [-0.10167643377690183, 51.517212141292276],
        //             [-0.0918917352905737, 51.5007052514338],
        //             [-0.1045088464966284, 51.48820090868017],
        //             [-0.12905642340092527, 51.488094019171655],
        //             [-0.14012858221440183, 51.49963663824505]
        //         ], 
        //         // [
        //         //     [-0.11880746922872731, 51.50817299692196],
        //         //     [-0.10852298156544293, 51.503743553342105],
        //         //     [-0.11831489305905052, 51.496864173551984]
        //         // ]
        //     ],
        //     [
        //         [
        //             [-0.08244845485410224, 51.515971912023275],
        //             [-0.06787929763288503, 51.51883175656681],
        //             [-0.0563665863338656, 51.51023422072373],
        //             [-0.0616602469327745, 51.49999811427912],
        //             [-0.07610484295253173, 51.49480380161262]
        //         ]
        //     ]
        // ]

        const lnglatStrArray = [
            "122.009975,29.902646;122.008021,29.903762;122.005969,29.905802;122.005174,29.908408;122.004976,29.910586;122.005308,29.913063;122.006731,29.91518;122.008089,29.916075;122.009778,29.91674;122.011499,29.917042;122.012592,29.916782;122.013817,29.916092;122.015704,29.914942;122.016598,29.913988;122.017194,29.913264;122.01822,29.91287;122.019644,29.912908;122.020935,29.913308;122.021829,29.913112;122.023153,29.911894;122.024179,29.909587;122.024278,29.906484;122.02398,29.904536;122.023086,29.902784;122.021629,29.901558;122.018219,29.901218;122.016067,29.901212;122.013352,29.901732;122.009975,29.902646",
            "122.025569,29.909029;122.027134,29.910615;122.027996,29.910951;122.029442,29.910922;122.030138,29.910396;122.030634,29.909275;122.030832,29.907856;122.030601,29.906535;122.029972,29.905675;122.028788,29.905207;122.027555,29.904975;122.025933,29.905234;122.025072,29.90576;122.02494,29.906849;122.025106,29.907972;122.025569,29.909029",
            "122.006257,29.899574;122.006952,29.899988;122.00959,29.900486;122.015865,29.900785;122.017216,29.900789;122.018468,29.900483;122.019156,29.899534;122.019307,29.89816;122.018202,29.895914;122.017037,29.894458;122.014388,29.892654;122.011421,29.892381;122.008349,29.892662;122.007236,29.89316;122.006442,29.893977;122.005621,29.895691;122.005488,29.897962;122.005648,29.89886;122.006257,29.899574",
            "122.155605,29.893567;122.154651,29.893686;122.154017,29.894088;122.153337,29.894934;122.153253,29.895942;122.153538,29.896949;122.155047,29.898341;122.156434,29.898868;122.157164,29.898935;122.157856,29.898729;122.158352,29.898054;122.15845,29.897312;122.158255,29.896531;122.157573,29.895302;122.156901,29.894248;122.156365,29.893781;122.155605,29.893567",
            "122.102307,29.859341;122.102635,29.859435;122.103068,29.85941;122.103441,29.859186;122.103694,29.858883;122.103774,29.858455;122.103669,29.858022;122.103386,29.857704;122.102948,29.8575;122.10252,29.85744;122.102152,29.857504;122.101824,29.857743;122.101625,29.858062;122.101575,29.85844;122.10167,29.858823;122.101933,29.859142;122.102307,29.859341",
            "121.937595,29.735908;121.937734,29.736207;121.937821,29.736308;121.938047,29.736386;121.938308,29.736358;121.938464,29.736219;121.938542,29.735985;121.938551,29.735473;121.938412,29.735127;121.938247,29.734975;121.938056,29.734925;121.937821,29.734964;121.937647,29.735109;121.937551,29.735398;121.937595,29.735908",
            "122.035741,29.803025;122.036083,29.803057;122.036735,29.80213;122.037634,29.801451;122.03779,29.801049;122.038286,29.80071;122.038534,29.800277;122.03841,29.799905;122.037821,29.799749;122.037169,29.799624;122.036796,29.799313;122.036269,29.798135;122.035462,29.797266;122.034531,29.796954;122.033941,29.796829;122.033692,29.796581;122.033661,29.796023;122.033723,29.795466;122.034251,29.795158;122.03481,29.794974;122.035213,29.794665;122.035151,29.794169;122.034624,29.793797;122.034282,29.793363;122.033909,29.792897;122.033041,29.792678;122.032792,29.792956;122.032544,29.79407;122.032606,29.794968;122.032358,29.795524;122.032172,29.796576;122.031955,29.799579;122.032079,29.800539;122.032389,29.801097;122.035741,29.803025",
            "122.041172,29.803999;122.040521,29.805359;122.039621,29.807895;122.03959,29.808638;122.039187,29.80969;122.038473,29.810152;122.038132,29.811018;122.038504,29.812072;122.038939,29.812321;122.039621,29.812167;122.040087,29.811859;122.040242,29.811302;122.040149,29.810961;122.04018,29.810559;122.04049,29.810064;122.042228,29.807964;122.042911,29.807439;122.043717,29.806977;122.043965,29.806513;122.043996,29.806018;122.043779,29.805739;122.043345,29.805459;122.043066,29.80487;122.043065,29.804561;122.042848,29.804158;122.042289,29.803816;122.041731,29.803783;122.041172,29.803999",
            "121.926497,29.924371;121.925041,29.928137;121.927124,29.931158;121.931917,29.935118;121.938482,29.940122;121.946513,29.945618;121.949044,29.9476;121.949465,29.947661;121.950765,29.949551;121.952897,29.950732;121.9633,29.955263;121.967995,29.956524;121.971021,29.95549;121.972691,29.95206;121.976189,29.949471;121.977965,29.949819;121.980089,29.949141;121.981725,29.947032;121.982482,29.944304;121.984397,29.937623;121.985555,29.936808;121.988367,29.936339;121.992607,29.935874;121.994523,29.934582;121.99548,29.932879;121.997195,29.92811;121.998214,29.926474;122.000138,29.925458;122.002899,29.923184;122.003708,29.919964;122.002979,29.910532;122.002979,29.903199;122.003463,29.899009;122.005161,29.893373;122.007181,29.891687;122.009768,29.891131;122.015427,29.891389;122.031187,29.892241;122.038521,29.891181;122.065521,29.891786;122.073171,29.890295;122.076586,29.890573;122.080139,29.892623;122.092698,29.903002;122.096249,29.905052;122.099929,29.905324;122.10334,29.905324;122.107166,29.905597;122.109613,29.906414;122.116708,29.90996;122.121069,29.909957;122.125838,29.908861;122.137008,29.903527;122.140136,29.90175;122.142726,29.895741;122.143817,29.888643;122.143678,29.883732;122.14308,29.877714;122.135914,29.872279;122.119973,29.865678;122.102219,29.859664;122.096106,29.855312;122.090515,29.850942;122.084782,29.844526;122.077537,29.841107;122.066473,29.836452;122.048566,29.826047;122.044186,29.822518;122.04017,29.817898;122.037594,29.813735;122.036381,29.806627;122.031834,29.801324;122.024254,29.788228;122.023114,29.785859;122.019422,29.780596;122.017761,29.775042;122.015983,29.771931;122.003152,29.762266;121.997896,29.760158;121.989739,29.758832;121.979639,29.754577;121.966681,29.751706;121.959205,29.750007;121.946678,29.749666;121.940996,29.749131;121.937608,29.748538;121.925554,29.741261;121.906451,29.719231;121.895312,29.708927;121.894168,29.716566;121.893483,29.720521;121.89246,29.724528;121.891584,29.727626;121.890639,29.730542;121.88907,29.735689;121.887813,29.738034;121.886426,29.73871;121.883392,29.739841;121.882274,29.739888;121.879059,29.741126;121.875887,29.742879;121.872854,29.744183;121.871641,29.744716;121.870289,29.745311;121.869345,29.745529;121.867864,29.745869;121.865958,29.745857;121.865291,29.7466;121.864893,29.747745;121.862857,29.747782;121.861281,29.747835;121.859444,29.74776;121.857738,29.748324;121.856543,29.749922;121.854698,29.750713;121.852524,29.751157;121.850879,29.752697;121.84829,29.756007;121.846178,29.758231;121.844723,29.759312;121.842887,29.758956;121.841641,29.758947;121.840385,29.760319;121.837909,29.764886;121.836506,29.767636;121.834455,29.770318;121.832853,29.772086;121.831277,29.773337;121.829294,29.774524;121.827641,29.77572;121.826126,29.777197;121.825251,29.779375;121.823935,29.779599;121.823017,29.779818;121.822091,29.780616;121.820307,29.78164;121.82016,29.784047;121.820186,29.787431;121.820091,29.790354;121.820265,29.792474;121.81881,29.793962;121.816888,29.796186;121.813857,29.797191;121.813069,29.797186;121.811813,29.797926;121.811086,29.799353;121.810601,29.801191;121.807215,29.805289;121.803309,29.808768;121.801135,29.810015;121.798961,29.811199;121.796579,29.81239;121.793425,29.81351;121.790202,29.814061;121.786068,29.814543;121.784942,29.815517;121.786996,29.81943;121.788157,29.820585;121.789067,29.821793;121.789249,29.823229;121.788314,29.825062;121.786199,29.826478;121.783955,29.827895;121.781242,29.829532;121.77728,29.831339;121.778061,29.832437;121.778182,29.833179;121.777064,29.833981;121.774108,29.833721;121.770492,29.833688;121.767595,29.834476;121.764699,29.835252;121.76377,29.83564;121.762183,29.836546;121.761714,29.837859;121.76103,29.840036;121.760023,29.842039;121.758635,29.842658;121.757394,29.841779;121.755824,29.841764;121.754956,29.843019;121.754479,29.844223;121.753672,29.845417;121.751832,29.845408;121.750001,29.845328;121.748213,29.84623;121.746694,29.84662;121.746538,29.848856;121.74646,29.850056;121.746191,29.850972;121.742701,29.850883;121.740278,29.850173;121.73862,29.851474;121.737691,29.852268;121.737543,29.853068;121.738586,29.854569;121.740418,29.855902;121.741121,29.857409;121.741347,29.860675;121.740245,29.864679;121.73962,29.86783;121.739733,29.86949;121.738344,29.870739;121.736364,29.87135;121.734253,29.871735;121.731995,29.8732;121.729815,29.873925;121.727904,29.87385;121.72581,29.872854;121.723994,29.870479;121.722491,29.869436;121.718884,29.867963;121.71699,29.866569;121.714191,29.86459;121.706663,29.859924;121.703515,29.858398;121.703532,29.857414;121.701568,29.856599;121.699716,29.856406;121.697472,29.856777;121.69622,29.856762;121.694063,29.855024;121.691838,29.854249;121.690124,29.854463;121.689133,29.854965;121.68808,29.854032;121.686376,29.853499;121.684932,29.853084;121.68348,29.853357;121.68261,29.854545;121.682254,29.856148;121.681576,29.85815;121.680175,29.860307;121.679619,29.862485;121.678932,29.864541;121.678654,29.866261;121.677054,29.867901;121.675314,29.869206;121.673932,29.869588;121.672679,29.869347;121.671897,29.869562;121.672131,29.871405;121.673758,29.873258;121.674262,29.874923;121.673793,29.876468;121.672637,29.879323;121.673141,29.881223;121.673785,29.882377;121.674168,29.883643;121.673889,29.884443;121.673731,29.884786;121.673679,29.885269;121.672184,29.886319;121.671527,29.887146;121.671316,29.887241;121.670734,29.887272;121.670012,29.887474;121.669583,29.887499;121.66929,29.887676;121.668887,29.888122;121.668693,29.888185;121.667928,29.888024;121.666475,29.887895;121.666504,29.888165;121.666352,29.888472;121.66583,29.889523;121.665285,29.890324;121.664845,29.891133;121.667893,29.893883;121.668159,29.894143;121.668111,29.894262;121.666779,29.897071;121.666258,29.898015;121.666026,29.898631;121.665636,29.899371;121.665273,29.900122;121.665049,29.900486;121.664268,29.900278;121.66384,29.900804;121.663396,29.90045;121.661967,29.902974;121.661829,29.903218;121.660392,29.902657;121.660231,29.903117;121.659531,29.902872;121.659351,29.903158;121.659248,29.9032;121.658224,29.902736;121.657917,29.903224;121.658619,29.903721;121.658493,29.904101;121.658666,29.904227;121.658565,29.904452;121.658242,29.904309;121.657442,29.905606;121.657169,29.905823;121.65672,29.905797;121.656462,29.906036;121.656071,29.906309;121.655972,29.906157;121.655046,29.906823;121.652698,29.907535;121.654559,29.910374;121.656328,29.912403;121.65805,29.913866;121.65989,29.915141;121.663571,29.916066;121.667581,29.916686;121.671918,29.917219;121.676475,29.918399;121.680354,29.919952;121.682972,29.920958;121.685726,29.923032;121.687608,29.924964;121.689687,29.927513;121.691365,29.931394;121.692879,29.934785;121.694125,29.937742;121.696013,29.941053;121.697925,29.943552;121.699738,29.944778;121.702452,29.945668;121.704982,29.94601;121.707824,29.945819;121.711876,29.945053;121.715611,29.94477;121.718847,29.945066;121.721836,29.94629;121.724982,29.948958;121.726954,29.951686;121.728836,29.955312;121.730414,29.959382;121.732495,29.962687;121.735188,29.965319;121.737673,29.966999;121.740759,29.968508;121.744794,29.970096;121.74987,29.971504;121.756291,29.972666;121.766438,29.976578;121.771666,29.979794;121.775056,29.982116;121.777466,29.983796;121.780977,29.986059;121.788396,29.990799;121.804033,29.981131;121.814371,29.974349;121.835197,29.957945;121.859971,29.943983;121.901799,29.92368;121.909633,29.922612;121.919531,29.920819;121.923491,29.922459;121.926497,29.924371"
        ];

        let lnglatsList = [];
        lnglatStrArray.forEach(lnglatStr => {
            let lnglat = lnglatStr.split(';');
            let lnglats = [];
            lnglat.forEach(ll => {
                ll = ll.split(',');
                ll = [parseFloat(ll[0]), parseFloat(ll[1])];
                lnglats.push(ll);
            });
            lnglatsList.push([lnglats]);
        });

        let polygon = new maptalks.Polygon(lnglatsList[0]);
        let multiPolygon = new maptalks.MultiPolygon(lnglatsList,
        {
            'symbol': [
                {
                    'lineColor': 'red',
                    'lineWidth': 3,
                    'polygonFillOpacity': 0
                }
            ]
        });
        let polygon1 = new maptalks.Polygon(lnglatsList[lnglatsList.length - 1]);
        var outline = multiPolygon.copy();
        // baseLayer.setMask(polygon);
        // baseLayer.setMask(polygon1);
        baseLayer.setMask(multiPolygon);


        var point = new maptalks.Marker(
            map.getCenter(),
            {
                visible: true,
                editable: true,
                cursor: 'pointer',
                shadowBlur: 0,
                shadowColor: 'black',
                draggable: false,
                dragShadow: false, // display a shadow during dragging
                drawOnAxis: null,  // force dragging stick on a axis, can be: x, y
                symbol: {
                    'textFaceName': 'sans-serif',
                    'textName': 'Beilun District',
                    'textFill': 'red',
                    'textHorizontalAlignment': 'center',
                    'textSize': 40
                }
            }
        );
       
        new maptalks.VectorLayer('vector', [outline,point]).addTo(map);
    </script>
</body>

</html>